function getBoatById(e){$.ajax({type:"GET",url:baseURL+"index.php/products/"+e,dataType:"json",success:renderBoat})}function renderBoat(e){var a=e[0];$("#boatId").val(a.id),$("#name").val(a.name),$("#description").val(a.description)}function updateBoat(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/products/"+$("#boatId").val(),dataType:"json",data:formToJSON(),success:function(e){e?e.id?(document.getElementById("addBoatFrm").reset(),$boatDT.api().ajax.reload(),$("#addBoatModal").modal("hide"),bootbox.alert("Boat Updated Successfully")):e.error&&$("div#error").html(e.error):bootbox.alert("Boat Update Failed!! Please try again")},error:function(){bootbox.alert("Boat Update Failed!! Please try again")}})}function addBoat(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/products",dataType:"json",data:formToJSON(),success:function(e){e?e.id?(document.getElementById("addBoatFrm").reset(),$boatDT.api().ajax.reload(),$("#addBoatModal").modal("hide"),bootbox.alert("Boat Added Successfully")):e.error&&$("div#error").html(e.error):bootbox.alert("Add Boat Failed!! Please try again")},error:function(){bootbox.alert("Add Boat Failed!! Please try again")}})}function formToJSON(){var e={name:$("#name").val(),description:$("#description").val()};return $("input#boatId").length?(e.id=$("#boatId").val(),e.updatedBy=logged_in_user_id):e.createdBy=logged_in_user_id,JSON.stringify(e)}function findAllProducts(){$.ajax({type:"GET",url:baseURL+"index.php/products",dataType:"json",success:renderProductList})}function validatePassword(){confirm_password.setCustomValidity(password.value.length>0&&password.value!=confirm_password.value?"Passwords Don't Match":"")}function checkExtension(e){var a=/\..+$/,t=e.match(a);return allowedExtensions[t]?!0:($("div#error").html("<span style='color:#cc0000'>File must be of type .csv or .xls or .xlsx!</span>"),!1)}function getMaterialById(e){$.ajax({type:"GET",url:baseURL+"index.php/material/"+e,dataType:"json",success:renderMaterial})}function renderMaterial(e){var a=e[0];$("#materialId").val(a.id),$("#prodId").val(a.productId),$("#name").val(a.name),$("#description").val(a.description),$("#partNumber").val(a.partNumber),$("#barcode").val(a.barcode),$("#actualQty").val(a.actualQty),$("#actualUnitPrice").val(a.actualUnitPrice),$("#stdQty").val(a.stdQty),$("#stdUnitPrice").val(a.stdUnitPrice),$("#vendorName").val(a.vendorName),$("#vendorPartNum").val(a.vendorPartNumber)}function renderProductList(e){$.each(e.products,function(e,a){$("#productId").add("#prodId").append('<option value="'+a.id+'">'+a.name+"</option>")}),$("#productId").find("option:eq(0)").prop("selected",!0),$materialDT=$("#materials").dataTable({dom:'T<"clear">lfrtip',tableTools:{sSwfPath:"plugins/DataTables-1.10.6/extensions/TableTools/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"xls",mColumns:[1,2,3,4,5,6,7,8,9,10,11,12],aButtons:["xls"],sFileName:"*.xls",sButtonText:"Export (Excel)",sButtonClass:"exportBtn"}]},ajax:{url:baseURL+"index.php/materials/"+$("#productId").val(),dataSrc:"materials"},order:[[2,"ASC"]],columnDefs:[{data:null,width:"4%",targets:0,orderable:!1,className:"text-center",createdCell:function(e,a,t){$(e).html("<i class='edit fa fa-pencil' data-id='"+t.id+"'></i><i data-id='"+t.id+"' class='delete fa fa-trash'></i>")}},{data:"name",targets:1,width:"20%"},{data:"description",width:"10%",targets:2},{data:"barcode",width:"12%",targets:3},{data:"partNumber",width:"12%",targets:4},{data:"vendorName",width:"12%",targets:5},{data:"vendorPartNumber",width:"12%",targets:6},{data:"actualQty",width:"3%",targets:7,visible:!1},{data:"actualUnitPrice",width:"3%",targets:8,createdCell:function(e,a){$(e).html(a>0?"$"+a:"")},visible:!1},{data:"actualTotalPrice",width:"3%",targets:9,createdCell:function(e,a){$(e).html(a>0?"$"+a:"")}},{data:"stdQty",width:"3%",targets:10,visible:!1},{data:"stdUnitPrice",width:"3%",targets:11,createdCell:function(e,a){$(e).html(a>0?"$"+a:"")},visible:!1},{data:"stdTotalPrice",width:"3%",targets:12,createdCell:function(e,a){$(e).html(a>0?"$"+a:"")}}]})}function updateMaterial(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/materials/"+$("#materialId").val(),dataType:"json",data:formToJSON(),success:function(e){e&&e.materialId?(document.getElementById("addMaterialFrm").reset(),$("select#productId").trigger("change"),$("#addMaterialModal").modal("hide"),bootbox.alert("Material Updated Successfully")):bootbox.alert("Material Update Failed!! Please try again")},error:function(){bootbox.alert("Material Update Failed!! Please try again")}})}function addMaterial(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/materials",dataType:"json",data:formToJSON(),success:function(e){e&&e.materialId?(document.getElementById("addMaterialFrm").reset(),$("select#productId").trigger("change"),$("#addMaterialModal").modal("hide"),bootbox.alert("Material Added Successfully")):bootbox.alert("Add Material Failed!! Please try again")},error:function(){bootbox.alert("Add Material Failed!! Please try again")}})}function formToJSON(){var e={productId:$("#prodId").val(),name:$("#name").val(),description:$("#description").val(),partNumber:$("#partNumber").val(),barcode:$("#barcode").val(),actualQty:$("#actualQty").val(),actualUnitPrice:$("#actualUnitPrice").val(),stdQty:$("#stdQty").val(),stdUnitPrice:$("#stdUnitPrice").val(),vendorName:$("#vendorName").val(),vendorPartNum:$("#vendorPartNum").val()};return $("input#materialId").length?(e.materialId=$("#materialId").val(),e.updatedBy=logged_in_user_id):e.createdBy=logged_in_user_id,JSON.stringify(e)}function validateProcessForm(){var e=$("input#starttime").val(),a=$("input#endtime").val(),t=!0;if(e.length>0&&a.length<1)return alert("Please select a valid EndTime"),!1;var o=new Date;return o.setHours(0),o.setMinutes(0),o.setSeconds(0),new Date(e)<o?(alert("StartTime cannot be a past date"),!1):a.length>0&&e.length<1?(alert("Please select a valid StartTime"),!1):(o.setHours(23),o.setMinutes(59),o.setSeconds(59),new Date(a)>o?(alert("EndTime cannot be a past date"),!1):new Date(e)>=new Date(a)?(alert("StartTime cannot be greater or equal to EndTime"),!1):t)}function updateProcess(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/process/update/"+$("#processId").val(),dataType:"json",data:formToJSON("add"),success:function(e){e&&e.processId?(document.getElementById("addProcessFrm").reset(),$("#addProcessModal").modal("hide"),$("select#productId").trigger("change"),bootbox.alert("Process Updated Successfully")):bootbox.alert("Process Update Failed!! Please try again")},error:function(){bootbox.alert("Process Update Failed!! Please try again")}})}function addProcess(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/process",dataType:"json",data:formToJSON("add"),success:function(e){e?e.processId?(document.getElementById("addProcessFrm").reset(),$("select#productId").trigger("change"),$("#addProcessModal").modal("hide"),bootbox.alert("Process Added Successfully")):e.error&&$("div#error").html(e.error):bootbox.alert("Add Process Failed!! Please try again")},error:function(){bootbox.alert("Add Process Failed!! Please try again")}})}function getProcessById(e){$.ajax({type:"GET",url:baseURL+"index.php/process/edit/"+e,dataType:"json",success:function(a){renderProcess(a,e)}})}function renderProcess(e,a){var t=e.process[0];$("#processId").val(a),$("#prodId").val(t.productId).trigger("change"),$("#processname").val(t.name),t.processGroupId&&(iProcessGrpsForEdit=t.processGroupId),$("div#overlay,p#loading").hide()}function initForm(e){$.when(getUsers(function(){e&&$("select#employees").val(e.userIdsForEdit)})).always(function(){$("div#overlay,p#loading").hide()})}function getMaterials(e){$.ajax({type:"GET",url:baseURL+"index.php/materials/"+e,dataType:"json",success:renderMaterialsList})}function getUsers(e){return $("select#employees").find("option").length>0?(e&&e(),!1):$.ajax({type:"GET",url:baseURL+"index.php/users/Employee",dataType:"json"}).always(function(a,t){"success"===t&&renderUsersList(a),e&&e()})}function getAllProcessGroups(e){$.ajax({type:"GET",url:baseURL+"index.php/process/groups/"+e,dataType:"json",success:renderProcessGrpList})}function renderMaterialsList(e){$.each(e.materials,function(e,a){$("select#materialIds").append('<option value="'+a.id+'">'+a.name+"</option>")}),$("select#materialIds").val(aMaterialIdsForEdit),aMaterialIdsForEdit=null}function renderUsersList(e){$.each(e.users,function(e,a){var t=a.firstName;null!=a.lastName&&(t+=" "+a.lastName),$("select#employees").append('<option value="'+a.id+'">'+t+"</option>")})}function renderProcessGrpList(e){$.each(e.processgroups,function(e,a){$("select#processGrpId").append('<option value="'+a.id+'">'+a.name+"</option>")}),$("select#processGrpId").val(iProcessGrpsForEdit),iProcessGrpsForEdit=null}function renderProductList(e){$.each(e.products,function(e,a){$("#productId").add("#prodId").add("#prodctId").append('<option value="'+a.id+'">'+a.name+"</option>")});$processDT=$("#process").dataTable({dom:'T<"clear">lfrtip',tableTools:{sSwfPath:"plugins/DataTables-1.10.6/extensions/TableTools/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"xls",mColumns:[0,1,2,3,4,5],aButtons:["xls"],sFileName:"*.xls",sButtonText:"Export (Excel)",sButtonClass:"exportBtn"}]},ajax:{url:baseURL+"index.php/process/"+$("#productId").val(),dataSrc:"process"},order:[[0,"ASC"]],columnDefs:[{data:null,targets:0,orderable:!1,className:"text-center",createdCell:function(e,a,t){$(e).html("<i class='edit fa fa-pencil' data-id='"+t.processIds+"'></i><i data-id='"+t.processIds+"' class='delete fa fa-trash'></i>")}},{data:"processGrpName",targets:1},{data:"processName",targets:2},{data:"laborHours",targets:3},{data:"totalCost",targets:4,createdCell:function(e,a){$(e).html(a>0?a+"$":"")}},{data:"employees",targets:5,createdCell:function(e,a){if(a&&a.length>0){for(var t="",o=0;o<a.length;o++)a[o].name&&(t+="<span class='name'>"+a[o].name+"</span>");$(e).html(t)}}}]})}function formToJSON(e){if("add"==e){var a={productId:$("#prodId").val(),name:$("#processname").val(),processGroupId:""!=$("#processGrpId").val()?$("#processGrpId").val():null,materialIds:null!=$("#materialIds").val()?$("#materialIds").val().join(","):null,startTime:$("#starttime").val(),endTime:$("#endtime").val(),userId:null!=$("#employees").val()?$("#employees").val().join(","):null};return $("input#processId").length?(a.processId=$("#processId").val(),a.updatedBy=logged_in_user_id,delete a.materialIds,delete a.startTime,delete a.endTime,delete a.userId):a.createdBy=logged_in_user_id,JSON.stringify(a)}var t={name:$("#name").val(),productId:$("#prodctId").val(),description:$("#description").val(),createdBy:logged_in_user_id};return JSON.stringify(t)}function renderProductList(e){$.each(e.products,function(e,a){$("#productId").add("#prodctId").append('<option value="'+a.id+'">'+a.name+"</option>")});$processGrpDT=$("#processgrps").dataTable({dom:'T<"clear">lfrtip',tableTools:{sSwfPath:"plugins/DataTables-1.10.6/extensions/TableTools/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"xls",mColumns:[0,1,2],aButtons:["xls"],sFileName:"*.xls",sButtonText:"Export (Excel)",sButtonClass:"exportBtn"}]},ajax:{url:baseURL+"index.php/process/groups/"+$("#productId").val(),dataSrc:"processgroups"},order:[[0,"ASC"]],columnDefs:[{data:null,targets:0,orderable:!1,className:"text-center",createdCell:function(e,a,t){$(e).html("<i class='edit fa fa-pencil' data-id='"+t.id+"'></i><i data-id='"+t.id+"' class='delete fa fa-trash'></i>")}},{data:"name",targets:1},{data:"description",targets:2}]})}function getProcessGrpById(e){$.ajax({type:"GET",url:baseURL+"index.php/process/group/edit/"+e,dataType:"json",success:renderProcessGroup})}function renderProcessGroup(e){var a=e.processgroup[0];$("#processGrpId").val(a.id),$("#prodctId").val(a.productId),$("#name").val(a.name),$("#description").val(a.description)}function addProcessGroup(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/process/group",dataType:"json",data:formToJSON("add"),success:function(e){e?e.groupId?(document.getElementById("addProcessGrpFrm").reset(),$("#addProcessGroupModal").modal("hide"),$("select#productId").trigger("change"),bootbox.alert("Process Group Added Successfully")):e.error&&$("div#error").html(e.error):bootbox.alert("Add Process Group Failed!! Please try again")},error:function(){bootbox.alert("Add Process Group Failed!! Please try again")}})}function updateProcessGroup(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/process/group/update/"+$("#processGrpId").val(),dataType:"json",data:formToJSON("update"),success:function(e){e&&e.processgroup?(document.getElementById("addProcessGrpFrm").reset(),$("#addProcessGroupModal").modal("hide"),$("select#productId").trigger("change"),bootbox.alert("Process Group Updated Successfully")):bootbox.alert("Process Group Update Failed!! Please try again")},error:function(){bootbox.alert("Process Group Update Failed!! Please try again")}})}function formToJSON(e){var a={name:$("#name").val(),productId:$("#prodctId").val(),description:$("#description").val()};return"add"==e?a.createdBy=logged_in_user_id:a.updatedBy=logged_in_user_id,JSON.stringify(a)}function getProfile(){$.ajax({type:"GET",url:baseURL+"index.php/user/"+logged_in_user_id,dataType:"json",success:renderProfile})}function changePassword(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/users/password/"+logged_in_user_id,dataType:"json",data:formToJSON("changePasswd"),success:function(e){e&&e.userId?(document.getElementById("chngePasswdFrm").reset(),$("#chngePasswdModal").modal("hide"),bootbox.alert("Password Updated Successfully")):bootbox.alert("Password Update Failed!! Please try again")},error:function(){bootbox.alert("Password Update Failed!! Please try again")}})}function updateUser(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/users/"+logged_in_user_id,dataType:"json",data:formToJSON("profile"),success:function(e){bootbox.alert(e?e.firstName?"Profile Updated Successfully":"Profile Update Failed!! Please try again":"Profile Update Failed!! Please try again")},error:function(){bootbox.alert("Profile Update Failed!! Please try again")}})}function formToJSON(e){return JSON.stringify("changePasswd"===e?{password:$("#password").val()}:{updatedBy:logged_in_user_id,firstName:$("#firstName").val(),lastName:$("#lastName").val(),email:$("#email").val(),designation:$("#desig").val(),phoneNumber:$("#phoneNumber").val(),userType:$("#userType").val()})}function renderProfile(e){var a=e.user[0];$("#firstName").val(a.firstName),$("#lastName").val(a.lastName),$("#email").val(a.email),$("#desig").val(a.designation),$("#phoneNumber").val(a.phoneNumber),$("#userType").val(a.userType)}function getUserById(e){$.ajax({type:"GET",url:baseURL+"index.php/user/"+e,dataType:"json",success:renderUser})}function renderUser(e){var a=e.user[0];$("#userId").val(a.id),$("#firstName").val(a.firstName),$("#lastName").val(a.lastName),$("#email").val(a.email),$("#designation").val(a.designation),$("#phoneNumber").val(a.phoneNumber),$("#userType").val(a.userType),$("#ratePerHour").val(a.ratePerHour)}function updateUser(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/users/"+$("#userId").val(),dataType:"json",data:formToJSON(),success:function(e){e?e.firstName?(document.getElementById("addUserFrm").reset(),$userDT.api().ajax.reload(),$("#addUserModal").modal("hide"),bootbox.alert("User Updated Successfully")):bootbox.alert(e.error?e.error:"User Update Failed!! Please try again"):bootbox.alert("User Update Failed!! Please try again")},error:function(){bootbox.alert("User Update Failed!! Please try again")}})}function addUser(){$.ajax({type:"POST",contentType:"application/json",url:baseURL+"index.php/users",dataType:"json",data:formToJSON(),success:function(e){e?e.userId?(document.getElementById("addUserFrm").reset(),$userDT.api().ajax.reload(),$("#addUserModal").modal("hide"),bootbox.alert("User Added Successfully")):bootbox.alert(e.error?e.error:"Add User Failed!! Please try again"):bootbox.alert("Add User Failed!! Please try again")},error:function(){bootbox.alert("Add User Failed!! Please try again")}})}function formToJSON(){var e={firstName:$("#firstName").val(),lastName:$("#lastName").val(),email:$("#email").val(),password:$("#password").val(),designation:$("#designation").val(),phoneNumber:$("#phoneNumber").val(),userType:$("#userType").val(),ratePerHour:$("#ratePerHour").val()};return $("input#userId").length?(e.userId=$("#userId").val(),e.updatedBy=logged_in_user_id):e.createdBy=logged_in_user_id,JSON.stringify(e)}var $boatDT=null;$("#addBoatModal").on("hidden.bs.modal",function(){document.getElementById("addBoatFrm").reset(),$("#boatId").remove(),$("div#statusMsg,div#error").text(""),$("#myModalLabel").text("Add Boat"),$("#saveBoatBtn").text("Save")}),$(document).on("click","i.edit",function(){$that=$(this),$("#addBoatFrm").append("<input type='hidden' value='"+$(this).data("id")+"' class='form-control' name='boatId' id='boatId'>"),$("#addBoatModal").modal("show"),$("#myModalLabel").text("Edit Boat"),$("#saveBoatBtn").text("Update"),getBoatById($(this).data("id"))}),$("#addBoatModal").on("show.bs.modal",function(){setTimeout(function(){$("#name").focus()},500)}),$(document).ready(function(){$boatDT=$("#boats").dataTable({dom:"lfrtip",ajax:{url:baseURL+"index.php/products",dataSrc:"products"},order:[[1,"ASC"]],columnDefs:[{data:null,targets:0,orderable:!1,className:"text-center",createdCell:function(e,a,t){$(e).html("<i class='edit fa fa-pencil' data-id='"+t.id+"'></i><i data-id='"+t.id+"' class='delete fa fa-trash'></i>")}},{data:"name",targets:1},{data:"description",targets:2}]})}),$(document).on("click","i.delete",function(){$that=$(this),bootbox.dialog({message:"Are you sure you want to delete?",title:"Delete Boat",buttons:{success:{label:"No",className:"btn",callback:function(){}},danger:{label:"Yes",className:"btn-danger",callback:function(){$.ajax({type:"POST",url:baseURL+"index.php/products/delete/"+$that.data("id"),data:JSON.stringify({deletedBy:logged_in_user_id}),dataType:"json",success:function(e){e?e.productId&&bootbox.alert("Boat deleted successfully",function(){$boatDT.api().ajax.reload()}):bootbox.alert("Oops!! Please try again")}})}}}})}),$(document).on("submit","form#addBoatFrm",function(){return $("#boatId").length?updateBoat():addBoat(),!1});var loc=location.href;if($("select#productId").change(function(){var e=null,a="materials/"+$("#productId").val();loc.indexOf("process.php")>0?(e=$processDT,a="process/"+$("#productId").val()):loc.indexOf("processgrps.php")>0?(a="process/groups/"+$("#productId").val(),e=$processGrpDT):e=$materialDT,a=baseURL+"index.php/"+a,e.api().ajax.url(a),e.api().ajax.reload()}),loc.indexOf("users.php")>=0||loc.indexOf("profile.php")>=0){var password=document.getElementById("password"),confirm_password=document.getElementById("confirm_password");password.onchange=validatePassword,confirm_password.onkeyup=validatePassword}var baseURL="http://localhost/~Mahesh/Admin/";$(document).on("submit","form#login_form",function(){return $.ajax({type:"POST",url:baseURL+"loginController.php",cache:!1,data:{username:$("input[name='username']").val(),password:$("input[name='password']").val()},success:function(e){json=JSON.parse(e),json&&(json.userId?location.href=baseURL+"materials.php":json.error&&$("#error").html("<span style='color:#cc0000'>"+json.error+"</span> "))},error:function(){$("#error").html("<span style='color:#cc0000'>Oops!: Please try again. </span> ")}}),!1});var $materialDT=null;$(document).ready(function(){findAllProducts()});var allowedExtensions={".xls":1,".csv":1,".xlsx":1};$("input#file").change(function(){$("div#error").html("")}),$("form#uploadMaterialsFrm").on("submit",function(e){e.preventDefault(),checkExtension($("input#file").val())&&$.ajax({url:baseURL+"upload.php",type:"POST",data:new FormData(this),beforeSend:function(){waitingDialog.show("Uploading Materials. Please wait")},contentType:!1,cache:!1,processData:!1,success:function(e){document.getElementById("uploadMaterialsFrm").reset(),$("#importMaterialsModal").modal("hide"),bootbox.alert(e),$(".bootbox-body").css("max-height","300px"),$(".bootbox-body").css("overflow","scroll"),$("select#productId").trigger("change")},error:function(){$("div#error").html("<span style='color:#cc0000'>Upload Materials Failed!! Please try again</span>")},complete:function(){waitingDialog.hide()}})}),$("#addMaterialModal").on("hidden.bs.modal",function(){document.getElementById("addMaterialFrm").reset(),$("#materialId").remove(),$("div#statusMsg").text(""),$("#myModalLabel").text("Add Material"),$("#saveMaterialBtn").text("Save")}),$(document).on("click","i.edit",function(){$that=$(this),$("#addMaterialFrm").append("<input type='hidden' value='"+$(this).data("id")+"' class='form-control' name='materialId' id='materialId'>"),$("#addMaterialModal").modal("show"),$("#myModalLabel").text("Edit Material"),$("#saveMaterialBtn").text("Update"),getMaterialById($(this).data("id"))}),$(document).on("click","i.delete",function(){$that=$(this),bootbox.dialog({message:"Are you sure you want to delete?",title:"Delete Material",buttons:{success:{label:"No",className:"btn",callback:function(){}},danger:{label:"Yes",className:"btn-danger",callback:function(){$.ajax({type:"POST",url:baseURL+"index.php/materials/delete/"+$that.data("id"),dataType:"json",data:JSON.stringify({deletedBy:logged_in_user_id}),success:function(e){e?e.materialId&&bootbox.alert("Material deleted successfully",function(){$("select#productId").trigger("change")}):bootbox.alert("Oops!! Please try again")}})}}}})}),$("#addMaterialModal").on("show.bs.modal",function(){setTimeout(function(){$("#name").focus()},500)}),$(document).on("submit","form#addMaterialFrm",function(){return $("#materialId").length?updateMaterial():addMaterial(),!1});var aMaterialIdsForEdit=null,iProcessGrpsForEdit=null;$(document).ready(function(){findAllProducts(),$("#starttime,#endtime").datetimepicker({format:"Y-m-d H:i:s"}),$("select#prodId").change(function(){$("select#materialIds").empty(),$(this).val().length>0&&getMaterials($(this).val()),$("select#processGrpId").find("option:gt(0)").remove(),$(this).val().length>0&&getAllProcessGroups($(this).val())}),$("select#prodctId").change(function(){$("div#statusMsg,div#error").text("")})}),$(document).on("submit","form#addProcessGrpFrm",function(){return $("div#error").html(""),addProcessGroup(),!1}),$(document).on("submit","form#addProcessFrm",function(){return $("#processId").length?updateProcess():validateProcessForm()&&addProcess(),!1}),$(document).on("click","i.edit",function(){$that=$(this),$("#addProcessFrm").append("<input type='hidden' value='"+$(this).data("id")+"' class='form-control' name='processId' id='processId'>"),$("#addProcessModal").modal("show"),$(".hide-for-edit").hide(),$("#myModalLabel").text("Edit process"),$("#saveProcessBtn").text("Update"),getProcessById($(this).data("id"))}),$("#addProcessModal").on("show.bs.modal",function(){$("div#overlay,p#loading").show(),initForm()}),$("#addProcessModal").on("hidden.bs.modal",function(){document.getElementById("addProcessFrm").reset(),$("select#prodId").trigger("change"),$("#processId").remove(),$("div#statusMsg,div#error").text(""),$(".hide-for-edit").show(),$("#myModalLabel").text("Add Process"),$("#saveProcessBtn").text("Save")}),$(document).on("click","i.delete",function(){$that=$(this),bootbox.dialog({message:"Are you sure you want to delete?",title:"Delete Process",buttons:{success:{label:"No",className:"btn",callback:function(){}},danger:{label:"Yes",className:"btn-danger",callback:function(){$.ajax({type:"POST",url:baseURL+"index.php/process/delete/",dataType:"json",data:JSON.stringify({processIds:$that.data("id"),deletedBy:logged_in_user_id}),success:function(e){e?e.processIds&&bootbox.alert("Process deleted successfully",function(){$("select#productId").trigger("change")}):bootbox.alert("Oops!! Please try again")}})}}}})}),$(document).ready(function(){findAllProducts()}),$(document).on("submit","form#addProcessGrpFrm",function(){return $("div#error").html(""),$("#processGrpId").length?updateProcessGroup():addProcessGroup(),!1}),$(document).on("click","i.delete",function(){$that=$(this),bootbox.dialog({message:"Are you sure you want to delete?",title:"Delete Process Group",buttons:{success:{label:"No",className:"btn",callback:function(){}},danger:{label:"Yes",className:"btn-danger",callback:function(){$.ajax({type:"POST",url:baseURL+"index.php/process/group/delete/"+$that.data("id"),dataType:"json",data:JSON.stringify({deletedBy:logged_in_user_id}),success:function(e){e?e.processGrpId&&bootbox.alert("Process Group deleted successfully",function(){$("select#productId").trigger("change")}):bootbox.alert("Oops!! Please try again")}})}}}})}),$(document).on("click","i.edit",function(){$that=$(this),$("#addProcessGrpFrm").append("<input type='hidden' value='"+$(this).data("id")+"' class='form-control' name='processGrpId' id='processGrpId'>"),$("#addProcessGroupModal").modal("show"),$("#myModalLabel").text("Edit process group"),$("#saveProcessGrpBtn").text("Update"),getProcessGrpById($(this).data("id"))}),$("#addProcessGroupModal").on("hidden.bs.modal",function(){document.getElementById("addProcessGrpFrm").reset(),$("#processGrpId").remove(),$("div#statusMsg,div#error").text(""),$("#myModalLabel").text("Add Process Group"),$("#saveProcessGrpBtn").text("Save")}),$(document).ready(function(){getProfile()}),$(document).on("submit","form#chngePasswdFrm",function(){return changePassword(),!1}),$(document).on("submit","form#myProfileFrm",function(){return updateUser(),!1});var $userDT=null;$(document).ready(function(){$userDT=$("#users").dataTable({dom:"lfrtip",ajax:{url:baseURL+"index.php/users/all",dataSrc:"users"},order:[[1,"ASC"]],columnDefs:[{data:null,targets:0,orderable:!1,className:"text-center",createdCell:function(e,a,t){$(e).html("<i class='edit fa fa-pencil' data-id='"+t.id+"'></i><i data-id='"+t.id+"' class='delete fa fa-trash'></i>")}},{data:"firstName",targets:1,createdCell:function(e,a,t){var o=t.firstName;t.middleName&&(o+=" "+t.middleName),t.lastName&&(o+=" "+t.lastName),$(e).html(o)}},{data:"email",targets:2},{data:"designation",targets:3},{data:"ratePerHour",targets:4,createdCell:function(e,a){0==a&&$(e).html("-")}},{data:"phoneNumber",targets:5},{data:"userType",targets:6},{data:"deleted",targets:7,createdCell:function(e,a){$(e).html(0==a?"Active":"Not Active")}}]})}),$(document).on("click","i.delete",function(){$that=$(this),bootbox.dialog({message:"Are you sure you want to delete?",title:"Delete User",buttons:{success:{label:"No",className:"btn",callback:function(){}},danger:{label:"Yes",className:"btn-danger",callback:function(){$.ajax({type:"POST",url:baseURL+"index.php/users/delete/"+$that.data("id"),data:JSON.stringify({deletedBy:logged_in_user_id}),dataType:"json",success:function(e){e?e.userId&&bootbox.alert("User deleted successfully",function(){$userDT.api().ajax.reload()}):bootbox.alert("Oops!! Please try again")}})}}}})}),$("#addUserModal").on("hidden.bs.modal",function(){$("input#password").prop("required",!1),document.getElementById("addUserFrm").reset(),$("#userId").remove(),$("div#statusMsg").text(""),$("#myModalLabel").text("Add User"),$("#saveUserBtn").text("Save")}),$(document).on("click","i.edit",function(){$that=$(this),$("#addUserFrm").append("<input type='hidden' value='"+$(this).data("id")+"' class='form-control' name='userId' id='userId'>"),$("#addUserModal").modal("show"),$("#myModalLabel").text("Edit User"),$("#saveUserBtn").text("Update"),getUserById($(this).data("id")),$("input#password").prop("required",!1)}),$(document).on("submit","form#addUserFrm",function(){return $("#userId").length?updateUser():addUser(),!1});